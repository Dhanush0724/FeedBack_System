<h2 class="title">👩‍💻 Employee Feedback</h2>
<h3 *ngIf="employeeInfo as emp" class="welcome">Welcome, {{ emp.name }}</h3>

<div class="filter-section">
  <label for="sentimentFilter">Filter by Sentiment:</label>
  <select id="sentimentFilter" [ngModel]="sentimentFilter()" (ngModelChange)="sentimentFilter.set($event)">
    <option value="all">All</option>
    <option value="positive">Positive</option>
    <option value="neutral">Neutral</option>
    <option value="negative">Negative</option>
  </select>
</div>

<table *ngIf="filteredFeedbacks().length > 0; else noFeedback" class="feedback-table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Strengths</th>
      <th>Improvements</th>
      <th>Sentiment</th>
      <th>Date</th>
      <th>Acknowledgement</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let fb of filteredFeedbacks()">
      <tr>
        <td>{{ fb.id }}</td>
        <td>{{ fb.strengths }}</td>
        <td>{{ fb.improvements }}</td>
        <td [ngClass]="fb.sentiment">{{ fb.sentiment }}</td>
        <td>{{ fb.created_at | date: 'short' }}</td>
        <td>
          <span *ngIf="fb.acknowledged" class="acknowledged">✅ Acknowledged</span>
          <button *ngIf="!fb.acknowledged" (click)="acknowledgeFeedback(fb.id)">Acknowledge</button>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>

<ng-template #noFeedback>
  <p class="no-feedback">No feedback found.</p>
</ng-template>
